{% extends "frontend/template.html.twig" %}


{% block title %}
    Trajet {{ parent() }}
{% endblock %}

{%  block page_title %}
    {{ trip.getDeparturePlace() }} &nbsp;<i class="fas fa-arrow-circle-right"></i>&nbsp; {{ trip.getArrivalPlace() }}
{% endblock %}

{% block section%}
    Départ le {{ trip.getDepartureSchedule() | date("d/m/Y à H:i") }}<br/>
    Durée : {{ trip.getDuration() | date("H:i") }}
    {% if hasReserved %}
        <hr>
        <h4>Ma Reservation</h4>
        Vous avez reservé ce trajet le {{ reservation.getReservationDate() | date("d/m/Y à H:i") }}<br>
        <a href="{{ path('') }}" class="btn btn-primary mt-2">Voir mon ticket</a>
        <a href="#" class="btn btn-warning ml-2 mt-2">Annuler ma réservation</a>
    {% endif %}
    <hr>
    <h4>À propos du conducteur</h4>
    Nom : <a href="{{ path('user.public_page', {'id' : trip.getConductor().getId()}) }}">{{ trip.getConductor().getCompletName() }}</a>
    <br><br/>

    <table class="table table-striped">
        <tbody>

            {% for preference in userPreferences %}
            <tr>
                <td scope="row">{{ preference.getPreference().getName() }}</td>
                <td>{{ preference.getValue() }}</td>
            </tr>
            {% else %}
                No preferences
            {% endfor %}

        </tbody>
    </table>


{% endblock %}

{% block right_section %}
    <div style="font-size: 60px">{{ trip.getPrice() }}<span style="font-size: 15px; display: inline-grid">$<br/>la place</span></div>
    <hr>
    {% if not app.user %}
        Vous devez être connecté pour réserver.<br/>
        <a href="#" class="btn btn-primary mt-2">Connexion</a>
    {% elseif hasReserved %}
        Vous avez déjà reservé ce trajet.<br/>
        <a href="#" class="btn btn-warning mt-2">Annuler ma réservation</a>
    {% elseif trip.remainingPlaces() > 0 %}
        Il reste des places :)
        <a href="#" class="btn btn-primary mt-2">Réserver ce trajet</a>
    {% else %}
        <p class="text-danger">Trajet Complet</p>
    {% endif %}
{% endblock %}